# ============================================================================
# EnMS - Energy Management System
# Environment Configuration Template
# ============================================================================
# INSTRUCTIONS:
# 1. Copy this file: cp .env.example .env
# 2. Update all <CHANGE_ME> values
# 3. Generate secure passwords for production
# 4. Never commit .env to version control
# ============================================================================

# ----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ----------------------------------------------------------------------------
POSTGRES_USER=enms_user
POSTGRES_PASSWORD=<CHANGE_ME>
POSTGRES_DB=enms
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# ----------------------------------------------------------------------------
# GRAFANA CONFIGURATION
# ----------------------------------------------------------------------------
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=<CHANGE_ME>

# ----------------------------------------------------------------------------
# REDIS CONFIGURATION
# ----------------------------------------------------------------------------
REDIS_PASSWORD=<CHANGE_ME>
REDIS_HOST=redis
REDIS_PORT=6379

# ----------------------------------------------------------------------------
# MQTT CONFIGURATION
# ----------------------------------------------------------------------------
MQTT_HOST=mqtt
MQTT_PORT=1883
MQTT_USERNAME=enms_mqtt
MQTT_PASSWORD=<CHANGE_ME>

# ----------------------------------------------------------------------------
# SECURITY
# ----------------------------------------------------------------------------
# Generate with: openssl rand -hex 32
JWT_SECRET=<CHANGE_ME>
API_KEY=<CHANGE_ME>

# ----------------------------------------------------------------------------
# SERVICE PORTS (External Access)
# ----------------------------------------------------------------------------
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
GRAFANA_PORT=3000
NODERED_PORT=1880
SIMULATOR_PORT=8003
ANALYTICS_PORT=8001
QUERY_PORT=8002
CHATBOT_PORT=5006

# ----------------------------------------------------------------------------
# CHATBOT CONFIGURATION (Rasa)
# ----------------------------------------------------------------------------
# Rasa server host (default: host.docker.internal for local Rasa)
RASA_HOST=host.docker.internal
RASA_PORT=5005

# ----------------------------------------------------------------------------
# APPLICATION CONFIGURATION
# ----------------------------------------------------------------------------
# Environment: development, staging, production
ENVIRONMENT=development

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Timezone
TZ=UTC

# ----------------------------------------------------------------------------
# SIMULATOR CONFIGURATION
# ----------------------------------------------------------------------------
# Number of factories to simulate
SIMULATOR_FACTORIES=1

# Number of machines per factory
SIMULATOR_MACHINES_PER_FACTORY=5

# Data generation interval (seconds) - comma separated for different machines
# Example: 1,1,10,10,30 means:
#   - Machine 1: 1 second
#   - Machine 2: 1 second
#   - Machine 3: 10 seconds
#   - Machine 4: 10 seconds
#   - Machine 5: 30 seconds
SIMULATOR_INTERVALS=1,1,10,10,30

# Auto-start simulator on container start
SIMULATOR_AUTO_START=true

# Enable anomaly injection
SIMULATOR_ENABLE_ANOMALIES=true

# ----------------------------------------------------------------------------
# ANALYTICS CONFIGURATION
# ----------------------------------------------------------------------------
# ML model training schedule (cron format)
# Default: Every Sunday at 2 AM
ML_TRAINING_SCHEDULE=0 2 * * 0

# Minimum samples required for baseline training
ML_MIN_SAMPLES=1000

# Historical data range for training (days)
ML_TRAINING_DAYS=90

# Anomaly detection threshold (standard deviations)
ANOMALY_THRESHOLD_WARNING=2
ANOMALY_THRESHOLD_CRITICAL=3

# ----------------------------------------------------------------------------
# COST CALCULATION
# ----------------------------------------------------------------------------
# Energy tariff (USD per kWh)
ENERGY_TARIFF_OFFPEAK=0.10
ENERGY_TARIFF_PEAK=0.25

# Peak hours (24-hour format, comma separated)
# Example: 8,9,10,11,12,13,14,15,16,17,18,19,20
TARIFF_PEAK_HOURS=8,9,10,11,12,13,14,15,16,17,18,19,20

# Carbon emission factor (kg CO2 per kWh)
CARBON_EMISSION_FACTOR=0.45

# ----------------------------------------------------------------------------
# BACKUP CONFIGURATION
# ----------------------------------------------------------------------------
# Backup retention period (days)
BACKUP_RETENTION_DAYS=30

# Backup schedule (cron format)
# Default: Daily at 3 AM
BACKUP_SCHEDULE=0 3 * * *

# ----------------------------------------------------------------------------
# PERFORMANCE TUNING
# ----------------------------------------------------------------------------
# PostgreSQL max connections
POSTGRES_MAX_CONNECTIONS=100

# TimescaleDB chunk time interval (hours)
TIMESCALEDB_CHUNK_INTERVAL=24

# Redis max memory (MB)
REDIS_MAX_MEMORY=512

# Node-RED max old space size (MB)
NODERED_MAX_OLD_SPACE_SIZE=512

# ----------------------------------------------------------------------------
# OPTIONAL: EXTERNAL INTEGRATIONS
# ----------------------------------------------------------------------------
# OVOS integration endpoint (if applicable)
# OVOS_ENDPOINT=http://ovos-service:8000

# External API endpoints
# EXTERNAL_API_URL=https://api.example.com
# EXTERNAL_API_KEY=<your_api_key>

# ----------------------------------------------------------------------------
# DEVELOPMENT MODE SETTINGS
# ----------------------------------------------------------------------------
# Enable debug mode (shows detailed errors)
DEBUG_MODE=false

# Enable auto-reload for development
AUTO_RELOAD=false

# Mock data mode (use simulator instead of real sensors)
MOCK_DATA_MODE=true

# ----------------------------------------------------------------------------
# OVOS VOICE ASSISTANT INTEGRATION
# ----------------------------------------------------------------------------
# OVOS REST Bridge IP (Windows/WSL2 machine running OVOS)
OVOS_BRIDGE_HOST=192.168.1.103
OVOS_BRIDGE_PORT=5000
OVOS_BRIDGE_TIMEOUT=20

# ----------------------------------------------------------------------------
# NOTES
# ----------------------------------------------------------------------------
# For production deployment:
# 1. Set strong passwords (20+ characters, mixed case, numbers, symbols)
# 2. Generate new JWT_SECRET and API_KEY
# 3. Set ENVIRONMENT=production
# 4. Set DEBUG_MODE=false
# 5. Configure proper SSL certificates
# 6. Review and adjust performance tuning parameters
# 7. Set up external monitoring and alerting
# 8. Configure backup destination
# ============================================================================
