â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                  GRAFANA DASHBOARD BACKUP - QUICK REFERENCE           â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

âš ï¸  CRITICAL REMINDER
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Grafana UI changes are NOT automatically saved to git!
  
  You MUST export dashboards before committing to avoid data loss.


ğŸ“‹ THE WORKFLOW
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  1. Make changes in Grafana UI
     â†’ Edit panels, queries, layouts, etc.
     â†’ http://localhost:3000

  2. Export dashboards to JSON files
     â†’ Run: ./scripts/backup-grafana-dashboards.sh

  3. Commit to git (your normal workflow)
     â†’ git add .
     â†’ git commit -m "Update Grafana dashboards"
     â†’ git push


âŒ¨ï¸  AUTOMATIC BACKUP
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  âœ¨ AUTO-BACKUP IS ENABLED! âœ¨
  
  Dashboards are automatically exported every 10 minutes.
  You don't need to run anything - just edit and commit!
  
  Manual backup (optional):
  ./scripts/backup-grafana-dashboards.sh
  
  Check status:
  sudo systemctl status grafana-backup.timer
  
  View logs:
  tail -f logs/grafana-backup.log


âœ… WHAT'S SAFE (NO ACTION NEEDED)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Node-RED:
  â€¢ Changes automatically saved to nodered/data/flows.json
  â€¢ No manual export required
  â€¢ Just git add, commit, push as usual


âš ï¸  WHAT NEEDS EXPORT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Grafana:
  â€¢ UI changes saved to Docker volume (not in git)
  â€¢ Must run backup script to export to JSON files
  â€¢ Then git add, commit, push


ğŸš« WHAT NOT TO DO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  âœ— docker compose down -v
    â†’ Deletes volumes, loses all Grafana changes!
    
  âœ— git commit without running backup script
    â†’ Your dashboard changes won't be in the commit!
    
  âœ— Manually editing JSON files instead of using UI
    â†’ Can work, but UI is easier and less error-prone


ğŸ“š DOCUMENTATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Detailed guide:        docs/GRAFANA-PERSISTENCE.md
  Quick reference:       grafana/README.md
  Implementation notes:  docs/SESSION-GRAFANA-PERSISTENCE.md
  Main README warning:   README.md (after "Quick Start")


ğŸ’¡ PRO TIPS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  â€¢ Run backup script before EVERY commit (if you changed Grafana)
  â€¢ Set up a cron job to auto-export hourly (see docs)
  â€¢ Use git diff to see what changed in dashboards
  â€¢ Backup script is safe to run multiple times


ğŸ†˜ TROUBLESHOOTING
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Script fails?
  â†’ Check Grafana is running: docker compose ps grafana
  â†’ Check API: curl -f http://localhost:3001/api/health
  â†’ Check credentials in .env file

  Dashboards not appearing?
  â†’ Restart Grafana: docker compose restart grafana
  â†’ Check logs: docker compose logs grafana --tail=50

  Lost changes already?
  â†’ If volume still exists: restart containers and export
  â†’ If volume deleted: changes permanently lost (restore from backup)


ğŸ“Š CURRENT DASHBOARDS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  â€¢ enms-energy-analysis      (Energy consumption analysis)
  â€¢ enms-factory-overview     (Factory-wide overview)
  â€¢ enms-machine-monitoring   (Individual machine monitoring)


ğŸ” EXAMPLE WORKFLOW
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  # 1. Make changes in Grafana
  
  # 2. Export dashboards
  $ ./scripts/backup-grafana-dashboards.sh
  
  ======================================================================
  EnMS - Grafana Dashboard Backup
  ======================================================================
  âœ… Grafana is running
  ğŸ“‹ Fetching dashboard list...
  Found 3 dashboard(s)
  ğŸ“¤ Exporting: Energy Analysis (enms-energy-analysis)
     âœ… Saved to: ./grafana/dashboards/enms-energy-analysis.json
  [...]
  âœ… Exported: 3
  
  # 3. Review changes
  $ git diff grafana/dashboards/
  
  # 4. Commit (your normal workflow)
  $ git add .
  $ git commit -m "Update dashboard: add power factor panel"
  $ git push
  
  # Done! âœ… Changes are now in git and safe


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Remember: When in doubt, export!
  The backup script is safe to run anytime.

  Questions? See docs/GRAFANA-PERSISTENCE.md

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
